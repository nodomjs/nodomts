<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>route</title>
    <script type="text/javascript" src="../../bin/nodom.js"></script>
    
    <style>
        .cls1,
        .colorimp {
            color: red;
        }

        .cls2 {
            font-size: 20pt;
        }
    </style>
</head>

<body>
    <div>
        <div>当前时间:{{date1|date:'yyyy/MM/dd'}}</div>
        <a x-route='/router' x-class="{cls1:'page1'}" active='{{page1}}'>page1</a>
        <div x-router></div>
    </div>

</body>
<script>
    nodom.newApp({
        options:{
            routerPrePath:'/route',
            templatePath:'/examples/route/pages/'
        },
        module:{
            name: 'mainModule',
            el: 'div',
            data: {
                page1: true,
                page2: false,
                date1: (new Date()).getTime(),
                x: {
                    y: {
                        z: 1
                    }
                }
            },
            methods: {

            }
        }
    });

    nodom.createModule([{
        name: 'tdir_router',
        template: '/router/router.html',
        data: {
            routes: [{
                    title: '路由用法1-基本用法',
                    path: '/router/route1',
                    active: true
                },
                {
                    title: '路由用法2-路由参数用法',
                    path: '/router/directive/route2',
                    active: false
                },
                {
                    title: '路由用法3-路由嵌套用法',
                    path: '/router/route3',
                    active: false
                }
            ]
        },
        delayInit: true,
    }, {
        name: 'r_pmod1',
        template: 'router/router1.html',
        data: {
            home: true,
            list: false,
            data: false
        },
        methods:{
            onFirstRender:function(){
                // console.log(this);
            }
        }
    }, {
        name: 'r_pmod2',
        template: 'router/router2.html',
        delayInit:true,
        data: {
            routes: [{
                    title: '首页',
                    path: '/router/directive/route2/rparam/home/1',
                    useParentPath:true,
                    active: true
                },
                {
                    title: '列表',
                    path: '/router/directive/route2/rparam/list/2',
                    useParentPath:true,
                    active: false
                },
                {
                    title: '数据',
                    path: '/router/directive/route2/rparam/data/3',
                    useParentPath:true,
                    active: false
                }
            ]
        }
    }, {
        name: 'r_pmod3',
        template: 'router/router3.html',
        delayInit:true
    }, {
        name: 'r_mod1',
        template: "<div>这是首页,路径是{{$route.path}}</div>",
        delayInit:true
    }, {
        name: 'r_mod2',
        template: "<div>这是商品列表页,路径是{{$route.path}}</div>",
        delayInit:true
    }, {
        name: 'r_mod3',
        template: "<div>这是数据页,路径是{{$route.path}}</div>",
        delayInit:true
    }, {
        name: 'r_mod4',
        template: "<div test='1'>这是{{$route.data.page}}页,编号是{{$route.data.id}}</div>",
        delayInit:true
    }, {
        name: 'r_mod5',
        template: "<div class='code1'>路由r1加载的模块<dir x-router></div></div>",
        delayInit:true
    }, {
        name: 'r_mod6',
        template: '<span>路由r2加载的模块</span>',
        delayInit:true
    }]);

    nodom.createRoute({
        path: '/router',
        module: 'tdir_router',
        routes: [{
            path: '/route1',
            module: 'r_pmod1',
            routes: [{
                path: '/home',
                module: 'r_mod1'
            }, {
                path: '/list',
                module: 'r_mod2'
            }, {
                path: '/data',
                module: 'r_mod3'
            }],
            onLeave:function(model){
                // console.log(this,model);
            }
        }, {
            path: '/directive/route2',
            module: 'r_pmod2',
            onEnter: function () {
                // console.log('route2');
            },
            routes: [{
                path: '/rparam/:page/:id',
                module: 'r_mod4',
                useParentPath:true,
                onEnter: function () {
                    // console.log('route2/rparam');
                }
            }]
        }, {
            path: '/route3',
            module: 'r_pmod3',
            routes: [{
                path: '/r1',
                module: 'r_mod5',
                routes: [{
                    path: '/r2',
                    module: 'r_mod6'
                }]
            }]
        }]
    });
</script>

</html>